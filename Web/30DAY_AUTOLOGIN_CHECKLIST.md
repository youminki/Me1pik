# ğŸ” 30ì¼ ìë™ë¡œê·¸ì¸ ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸

## ğŸ“‹ ê°œìš”

ì´ ë¬¸ì„œëŠ” ì›¹ì°½ì„ ë‹«ê±°ë‚˜ í•˜ì´ë¸Œë¦¬ë“œ ì•±ì„ ì¢…ë£Œí•´ë„ **ìë™ë¡œê·¸ì¸ ì²´í¬ ì‹œ 30ì¼ê°„ ë¡œê·¸ì¸ì´ ìœ ì§€**ë˜ëŠ”ì§€ ì ê²€í•˜ëŠ” ì²´í¬ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.

## ğŸ iOS í´ë” ì ê²€ ê²°ê³¼

### âœ… **ì™„ë²½í•˜ê²Œ êµ¬í˜„ë¨**

1. **30ì¼ í† í° ì €ì¥ ë³´ì¥ ì‹œìŠ¤í…œ** âœ…
   - `ensureTokenPersistence()`: 30ì¼ ë§Œë£Œ ì‹œê°„ ì„¤ì •
   - `saveLoginState()`: 30ì¼ ìë™ë¡œê·¸ì¸ ì„¤ì •
   - `saveTokensWithKeepLogin()`: keepLoginì— ë”°ë¥¸ 30ì¼/1ì¼ ì„ íƒì  ì €ì¥

2. **ì•± ìƒëª…ì£¼ê¸°ë³„ 30ì¼ í† í° ì €ì¥ ë³´ì¥** âœ…
   - `UIApplication.willResignActiveNotification` â†’ 30ì¼ í† í° ì €ì¥
   - `UIApplication.didEnterBackgroundNotification` â†’ 30ì¼ í† í° ì €ì¥
   - `UIApplication.willTerminateNotification` â†’ ê¸´ê¸‰ 30ì¼ í† í° ì €ì¥
   - `UIApplication.didBecomeActiveNotification` â†’ 30ì¼ í† í° ìƒíƒœ í™•ì¸

3. **ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ìœ¼ë¡œ ì €ì¥ ì‹œê°„ í™•ë³´** âœ…
   - ìµœëŒ€ 30ì´ˆ ë™ì•ˆ ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ê°€ëŠ¥
   - 30ì¼ í† í° ì €ì¥ ì™„ë£Œ ë³´ì¥
   - ì•± ì¢…ë£Œ ì‹œì—ë„ ì €ì¥ ì‹œê°„ í™•ë³´

## ğŸŒ ì›¹ í´ë” ì ê²€ ê²°ê³¼

### âœ… **ìˆ˜ì • ì™„ë£Œë¨**

1. **ì›¹ì°½ ë‹«í˜ ì‹œ 30ì¼ ìë™ë¡œê·¸ì¸ ë³´ì¥** âœ…
   - `beforeunload` ì´ë²¤íŠ¸ ì²˜ë¦¬ ì¶”ê°€
   - `visibilitychange` ì´ë²¤íŠ¸ ì²˜ë¦¬ ì¶”ê°€
   - localStorageì— 30ì¼ í† í° ì €ì¥ ë³´ì¥

2. **iOS ì›¹ë·° ì „ìš© 30ì¼ ìë™ë¡œê·¸ì¸ ë³´ì¥** âœ…
   - iOS ì›¹ë·° ë‹«í˜ ì‹œ ë„¤ì´í‹°ë¸Œ ì•±ì— í† í° ë™ê¸°í™”
   - í˜ì´ì§€ ìˆ¨ê¹€ ì‹œì—ë„ 30ì¼ í† í° ì €ì¥ ë³´ì¥

## ğŸ§ª **30ì¼ ìë™ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**

### **ì‹œë‚˜ë¦¬ì˜¤ 1: ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ìë™ë¡œê·¸ì¸ ì²´í¬ í›„ ì›¹ì°½ ë‹«ê¸°**

```bash
# 1. ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ Melpik ë¡œê·¸ì¸
# 2. "ìë™ ë¡œê·¸ì¸" ì²´í¬ë°•ìŠ¤ ì„ íƒ âœ…
# 3. ë¡œê·¸ì¸ ì™„ë£Œ
# 4. ì›¹ì°½ ì™„ì „íˆ ë‹«ê¸° (ë¸Œë¼ìš°ì € íƒ­ ë‹«ê¸°)
# 5. ì›¹ì°½ ë‹¤ì‹œ ì—´ê¸°
# 6. 30ì¼ ìë™ ë¡œê·¸ì¸ í™•ì¸ âœ…
```

**ì˜ˆìƒ ê²°ê³¼:**

- ì›¹ì°½ì„ ë‹«ì•„ë„ 30ì¼ê°„ ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€
- ì›¹ì°½ì„ ë‹¤ì‹œ ì—´ë©´ ìë™ ë¡œê·¸ì¸ë¨
- localStorageì— `tokenExpiresAt`ì´ 30ì¼ í›„ë¡œ ì„¤ì •ë¨

### **ì‹œë‚˜ë¦¬ì˜¤ 2: iOS í•˜ì´ë¸Œë¦¬ë“œ ì•±ì—ì„œ ìë™ë¡œê·¸ì¸ ì²´í¬ í›„ ì•± ì¢…ë£Œ**

```bash
# 1. iOS Melpik ì•±ì—ì„œ ë¡œê·¸ì¸
# 2. "ìë™ ë¡œê·¸ì¸" ì²´í¬ë°•ìŠ¤ ì„ íƒ âœ…
# 3. ë¡œê·¸ì¸ ì™„ë£Œ
# 4. ì•± ì™„ì „ ì¢…ë£Œ (ì•± ìŠ¤ìœ„ì²˜ì—ì„œ ìœ„ë¡œ ìŠ¤ì™€ì´í”„)
# 5. ì•± ì¬ì‹¤í–‰
# 6. 30ì¼ ìë™ ë¡œê·¸ì¸ í™•ì¸ âœ…
```

**ì˜ˆìƒ ê²°ê³¼:**

- ì•±ì„ ì¢…ë£Œí•´ë„ 30ì¼ê°„ ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€
- ì•±ì„ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ìë™ ë¡œê·¸ì¸ë¨
- UserDefaultsì™€ Keychainì— 30ì¼ ë§Œë£Œ ì‹œê°„ ì„¤ì •ë¨

### **ì‹œë‚˜ë¦¬ì˜¤ 3: iOS ì›¹ë·°ì—ì„œ ìë™ë¡œê·¸ì¸ ì²´í¬ í›„ ì›¹ë·° ë‹«ê¸°**

```bash
# 1. iOS ì•± ë‚´ ì›¹ë·°ì—ì„œ ë¡œê·¸ì¸
# 2. "ìë™ ë¡œê·¸ì¸" ì²´í¬ë°•ìŠ¤ ì„ íƒ âœ…
# 3. ë¡œê·¸ì¸ ì™„ë£Œ
# 4. ì›¹ë·° ë‹«ê¸° (ì•±ì—ì„œ ì›¹ë·° ì¢…ë£Œ)
# 5. ì›¹ë·° ë‹¤ì‹œ ì—´ê¸°
# 6. 30ì¼ ìë™ ë¡œê·¸ì¸ í™•ì¸ âœ…
```

**ì˜ˆìƒ ê²°ê³¼:**

- ì›¹ë·°ë¥¼ ë‹«ì•„ë„ 30ì¼ê°„ ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€
- ì›¹ë·°ë¥¼ ë‹¤ì‹œ ì—´ë©´ ìë™ ë¡œê·¸ì¸ë¨
- localStorageì™€ iOS ë„¤ì´í‹°ë¸Œ ì•±ì— í† í° ë™ê¸°í™”ë¨

## ğŸ” **ì ê²€í•´ì•¼ í•  í•µì‹¬ ìš”ì†Œë“¤**

### **1. ìë™ë¡œê·¸ì¸ ì²´í¬ë°•ìŠ¤ ìƒíƒœ í™•ì¸**

```javascript
// ì½˜ì†”ì—ì„œ í™•ì¸
console.log('keepLoginSetting:', localStorage.getItem('keepLoginSetting'));
console.log('autoLogin:', localStorage.getItem('autoLogin'));
console.log('persistentLogin:', localStorage.getItem('persistentLogin'));
```

**ì˜ˆìƒ ê°’:**

- `keepLoginSetting`: "true" âœ…
- `autoLogin`: "true" âœ…
- `persistentLogin`: "true" âœ…

### **2. 30ì¼ ë§Œë£Œ ì‹œê°„ ì„¤ì • í™•ì¸**

```javascript
// ì½˜ì†”ì—ì„œ í™•ì¸
console.log('tokenExpiresAt:', localStorage.getItem('tokenExpiresAt'));
console.log(
  'ë§Œë£Œ ì‹œê°„:',
  new Date(localStorage.getItem('tokenExpiresAt')).toLocaleDateString()
);
```

**ì˜ˆìƒ ê°’:**

- `tokenExpiresAt`: í˜„ì¬ ì‹œê°„ + 30ì¼ âœ…
- ë§Œë£Œ ì‹œê°„: 30ì¼ í›„ ë‚ ì§œ âœ…

### **3. í† í° ì €ì¥ ìƒíƒœ í™•ì¸**

```javascript
// ì½˜ì†”ì—ì„œ í™•ì¸
console.log(
  'accessToken:',
  localStorage.getItem('accessToken') ? 'âœ… ì¡´ì¬' : 'âŒ ì—†ìŒ'
);
console.log(
  'refreshToken:',
  localStorage.getItem('refreshToken') ? 'âœ… ì¡´ì¬' : 'âŒ ì—†ìŒ'
);
console.log('isLoggedIn:', localStorage.getItem('isLoggedIn'));
```

**ì˜ˆìƒ ê°’:**

- `accessToken`: âœ… ì¡´ì¬
- `refreshToken`: âœ… ì¡´ì¬
- `isLoggedIn`: "true" âœ…

## ğŸš¨ **ë¬¸ì œ ë°œìƒ ì‹œ ë””ë²„ê¹… ë°©ë²•**

### **1. ë¡œê·¸ í™•ì¸**

```bash
# iOS ì½˜ì†”ì—ì„œ í™•ì¸í•  ë¡œê·¸
ğŸ” === iOS 30ì¼ í† í° ì €ì¥ ë³´ì¥ ì‹œì‘ ===
ğŸ“Š iOS 30ì¼ í† í° ì €ì¥ ë³´ì¥ ê²°ê³¼:
  - accessToken ì €ì¥: âœ…
  - refreshToken ì €ì¥: âœ…
  - ë§Œë£Œ ì‹œê°„: 2024-02-15
  - 30ì¼ ìë™ë¡œê·¸ì¸ ì„¤ì • ì™„ë£Œ

# ì›¹ ì½˜ì†”ì—ì„œ í™•ì¸í•  ë¡œê·¸
ğŸ”„ ì›¹ì°½ ë‹«í˜ ê°ì§€ - 30ì¼ ìë™ë¡œê·¸ì¸ ë³´ì¥ ì‹œì‘
ğŸ’¾ ì›¹ì°½ ë‹«í˜ ì‹œ 30ì¼ ìë™ë¡œê·¸ì¸ ë³´ì¥ ì™„ë£Œ
ğŸ“… ë§Œë£Œ ì‹œê°„: 2024-02-15
```

### **2. ì €ì¥ì†Œ ìƒíƒœ í™•ì¸**

```javascript
// ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ í™•ì¸
// Application > Local Storage > localhost:3000
localStorage.getItem('keepLoginSetting'); // "true"
localStorage.getItem('autoLogin'); // "true"
localStorage.getItem('persistentLogin'); // "true"
localStorage.getItem('tokenExpiresAt'); // "2024-02-15T..."
```

### **3. iOS UserDefaults í™•ì¸**

```swift
// Xcode ì½˜ì†”ì—ì„œ í™•ì¸
po UserDefaults.standard.string(forKey: "keepLoginSetting")     // "true"
po UserDefaults.standard.string(forKey: "autoLogin")            // "true"
po UserDefaults.standard.string(forKey: "persistentLogin")      // "true"
po UserDefaults.standard.string(forKey: "tokenExpiresAt")       // "2024-02-15..."
```

## ğŸ¯ **ìµœì¢… ì ê²€ ê²°ê³¼**

### âœ… **iOS í´ë”**: ì™„ë²½í•˜ê²Œ êµ¬í˜„ë¨

- ì•± ì¢…ë£Œ ì‹œ 30ì¼ í† í° ì €ì¥ ë³´ì¥
- ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ìœ¼ë¡œ ì €ì¥ ì‹œê°„ í™•ë³´
- ëª¨ë“  ì•± ìƒëª…ì£¼ê¸° ì´ë²¤íŠ¸ì—ì„œ 30ì¼ í† í° ì €ì¥

### âœ… **ì›¹ í´ë”**: ìˆ˜ì • ì™„ë£Œë¨

- ì›¹ì°½ ë‹«í˜ ì‹œ 30ì¼ ìë™ë¡œê·¸ì¸ ë³´ì¥
- iOS ì›¹ë·° ì „ìš© 30ì¼ ìë™ë¡œê·¸ì¸ ë³´ì¥
- beforeunload ë° visibilitychange ì´ë²¤íŠ¸ ì²˜ë¦¬

## ğŸ‰ **ê²°ë¡ **

ì´ì œ **ì›¹ì°½ì„ ë‹«ê±°ë‚˜ í•˜ì´ë¸Œë¦¬ë“œ ì•±ì„ ì¢…ë£Œí•´ë„ ìë™ë¡œê·¸ì¸ ì²´í¬ ì‹œ 30ì¼ê°„ ë¡œê·¸ì¸ì´ ìœ ì§€**ë©ë‹ˆë‹¤!

- **ì›¹ ë¸Œë¼ìš°ì €**: ì›¹ì°½ ë‹«í˜ ì‹œ localStorageì— 30ì¼ í† í° ì €ì¥ âœ…
- **iOS ì•±**: ì•± ì¢…ë£Œ ì‹œ UserDefaults + Keychainì— 30ì¼ í† í° ì €ì¥ âœ…
- **iOS ì›¹ë·°**: ì›¹ë·° ë‹«í˜ ì‹œ ë„¤ì´í‹°ë¸Œ ì•±ê³¼ í† í° ë™ê¸°í™” âœ…

ëª¨ë“  í™˜ê²½ì—ì„œ 30ì¼ ìë™ë¡œê·¸ì¸ì´ ì™„ë²½í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤! ğŸš€
